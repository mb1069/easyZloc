# Here you can define all your data sets by using simple YAML syntax.
#
# Documentation for this file format can be found in "The Data Catalog"
# Link: https://kedro.readthedocs.io/en/stable/data/data_catalog.html

# RIES dataset
# bead_stack:
#   type: smlm_z.extras.datasets.TiffDataSet
#   filepath: /home/miguel/Projects/uni/data/smlm_3d/ries_nanopore/training-resized/NPC-A647-3D-BEADS-as-stacks.ome.tif

# spots:
#   type: smlm_z.extras.datasets.SpotsDataSet
#   filepath: /home/miguel/Projects/uni/data/smlm_3d/ries_nanopore/training-resized/NPC-A647-3D-BEADS-as-stacks-kept-slice.ome_spots.hdf5
#   key: spots

# locs:
#   type: pandas.HDFDataSet
#   filepath: /home/miguel/Projects/uni/data/smlm_3d/ries_nanopore/training-resized/NPC-A647-3D-BEADS-as-stacks-kept-slice.ome_locs.hdf5
#   key: locs

# nanopore_locs:
#   type: pandas.HDFDataSet
#   filepath: /home/miguel/Projects/uni/data/smlm_3d/ries_nanopore/training-resized/grid/step_grid_locs.hdf5
#   key: locs

# nanopore_spots:
#   type: smlm_z.extras.datasets.SpotsDataSet
#   filepath: /home/miguel/Projects/uni/data/smlm_3d/ries_nanopore/training-resized/grid/step_grid_spots.hdf5
#   key: spots

# Small ROI dataset
# bead_stack:
#   filepath: /home/miguel/Projects/uni/data/smlm_3d/fake_bead_stack/bead_stack/bead_stack.ome.tif
#   type: smlm_z.extras.datasets.TiffDataSet
# locs:
#   filepath: /home/miguel/Projects/uni/data/smlm_3d/fake_bead_stack/bead_stack/bead_stack_slice.ome_locs.hdf5
#   key: locs
#   type: pandas.HDFDataSet
# spots:
#   filepath: /home/miguel/Projects/uni/data/smlm_3d/fake_bead_stack/bead_stack/bead_stack_slice.ome_spots.hdf5
#   key: spots
#   type: smlm_z.extras.datasets.SpotsDataSet

nanopore_locs:
  filepath: /home/miguel/Projects/uni/data/smlm_3d/fake_bead_stack/nanopore/nanopore_locs.hdf5
  key: locs
  type: pandas.HDFDataSet
nanopore_spots:
  filepath: /home/miguel/Projects/uni/data/smlm_3d/fake_bead_stack/nanopore/nanopore_spots.hdf5
  key: spots
  type: smlm_z.extras.datasets.SpotsDataSet


training_stacks:
  filepath: /home/miguel/Projects/uni/data/smlm_3d/20230331_beads/combined/stacks.ome.tif
  # filepath: /home/miguel/Projects/uni/data/smlm_3d/20230331_beads_box15px/combined/stacks.ome.tif
  type: smlm_z.extras.datasets.TiffDataSet

locs:
  filepath: /home/miguel/Projects/uni/data/smlm_3d/20230331_beads/combined/locs.hdf
  # filepath: /home/miguel/Projects/uni/data/smlm_3d/20230331_beads_box15px/combined/locs.hdf
  key: locs
  type: pandas.HDFDataSet

norm_coords:
  type: pandas.CSVDataSet
  filepath: data/05_model_input/coords.csv


X:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X.pk

y:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y.pk

norm_spots:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/norm_spots.pk


model:
  type: pickle.PickleDataSet
  filepath: data/06_models/model.pk
  # type: tensorflow.TensorFlowModelDataset
  # filepath: data/06_models/model.h5
  # load_args:
  #   compile: False
  # save_args:
  #   overwrite: True
  #   include_optimizer: True
  # layer: model
  
training_plot:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: matplotlib.MatplotlibWriter
    filepath: data/08_reporting/training_plot.png
    save_args:
      format: png

offsets_plot:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: matplotlib.MatplotlibWriter
    filepath: data/08_reporting/offsets_plot.png
    save_args:
      format: png
  

clf_metrics:
    type: kedro_mlflow.io.metrics.MlflowMetricsDataSet

data_plots:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: matplotlib.MatplotlibWriter
    filepath: data/05_model_input/data_plots/
    save_args:
      format: png

clf_figures:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: matplotlib.MatplotlibWriter
    filepath: data/08_reporting/clf_perf/
    save_args:
      format: png

scatter_figures:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: matplotlib.MatplotlibWriter
    filepath: data/08_reporting/scatter_plots/
    save_args:
      format: png


z_pos:
  type: pickle.PickleDataSet
  filepath: data/07_model_output/z_pos.pk

nanopore_plot_3d:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: matplotlib.MatplotlibWriter
    filepath: data/08_reporting/nanopore_plot_3d.png
    save_args:
      format: png

nanopore_gauss_model_fits:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: matplotlib.MatplotlibWriter
    filepath: data/08_reporting/nanopore_gauss_model_fits/
    save_args:
      format: png

resized_spots:
  type: MemoryDataSet
norm_df:
  type: MemoryDataSet
clustered_locs:
  type: MemoryDataSet

exp_data_plots:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: matplotlib.MatplotlibWriter
    filepath: data/05_model_input/exp_data_plots/
    save_args:
      format: png
  
cluster_stats_fig:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: matplotlib.MatplotlibWriter
    filepath: data/08_reporting/cluster_stats_fig.png
    save_args:
      format: png

cluster_locs_fig:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: matplotlib.MatplotlibWriter
    filepath: data/08_reporting/cluster_logs_fig.png
    save_args:
      format: png

X_train_aug:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_train_aug.pk

y_train_aug:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_train_aug.pk

X_test:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_test.pk

y_test:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_test.pk

X_val:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_val.pk

y_val:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_val.pk

X_train_aug_norm:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_train_aug_norm.pk

y_train_aug_norm:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_train_aug_norm.pk

X_test_norm:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_test_norm.pk

y_test_norm:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_test_norm.pk

X_val_norm:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_val_norm.pk

y_val_norm:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_val_norm.pk

X_norm:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_norm.pk

data_splits:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/data_splits.pk
